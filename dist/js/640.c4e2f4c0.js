"use strict";(self["webpackChunkchitter"]=self["webpackChunkchitter"]||[]).push([[640],{5113:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),i=a(9242),s=a(4870),n=a(988),r=a(2473);const c={class:"tweet-list"},o={key:1,class:"error gray-text"};var u={__name:"TweetList",props:["tweets","pending"],setup(e){const t=e,a=(0,n.U)();return(e,n)=>((0,l.wg)(),(0,l.iD)("div",c,[t.tweets&&t.tweets.length>0?((0,l.wg)(),(0,l.j4)(i.W3,{key:0,name:"fade-down"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.tweets,(e=>((0,l.wg)(),(0,l.j4)(r.Z,{key:e.id+e.type,id:e.id,user:(0,s.SU)(a).getUserProps(e.authorId),tweet:e,retweetedBy:e.retweetedBy,replyingTo:e.replyingToUser},null,8,["id","user","tweet","retweetedBy","replyingTo"])))),128))])),_:1})):t.pending?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",o," No tweets to display "))]))}};const w=u;var d=w},6601:function(e,t,a){a.d(t,{Z:function(){return w}});var l=a(3396),i=a(4870),s=a(9707),n=a(9327);const r=["innerHTML"];var c={__name:"EmbeddedText",props:["text"],setup(e){const t=e,a=(0,n.q)(),c=(0,i.iH)(null);function o(){if(!t.text||0===t.text.length)return;const e=t.text.split(" ").map((e=>{const t=e.split(/\r?\n/);switch(!0){case s.yV.test(e):return`<a class="blue-link" href="${e}" target="_blank">${e}</a>`;case s.nC.test(e):return`<a class="blue-link">${e}</a>`;case t.some((e=>s.PH.test(e))):return t.map((a=>s.PH.test(a)?`<a class="blue-link user-link" data-username=${e.replace("@","")}>${t.filter((e=>s.PH.test(e)))[0]}</a>`:a)).join("\n");default:return e}}));return e.join(" ")}const u=e=>{e.stopPropagation(),a.viewUserProfile(e.currentTarget.dataset.username)};return(0,l.bv)((()=>{const e=c.value.querySelectorAll(".user-link");Array.from(e).forEach((e=>e.addEventListener("click",u)))})),(0,l.Xn)((()=>{const e=c.value.querySelectorAll(".user-link");Array.from(e).forEach((e=>e.removeEventListener("click",u)))})),(0,l.ic)((()=>{const e=c.value.querySelectorAll(".user-link");Array.from(e).forEach((e=>e.addEventListener("click",u)))})),(0,l.Jd)((()=>{const e=c.value.querySelectorAll(".user-link");Array.from(e).forEach((e=>e.removeEventListener("click",u)))})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{ref_key:"textEl",ref:c,innerHTML:o()},null,8,r))}},o=a(89);const u=(0,o.Z)(c,[["__scopeId","data-v-50c560dd"]]);var w=u},6425:function(e,t,a){a.d(t,{Z:function(){return w}});var l=a(3396),i=a(9242),s=a(4870),n=a(7925),r=a(3282);const c=["onClick"];var o={__name:"LoadTweets",props:{rawTweets:Array,isFetching:Boolean,fetch:Function},setup(e){const t=e,a=(0,n.g)(),o=(0,s.iH)(t.rawTweets),u=()=>{t.fetch(o.value.slice(0,a.fetchLimit)),o.value=o.value.slice(a.fetchLimit)};return(e,a)=>o.value.length>0?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.wy)((0,l.Wm)(r.Z,null,null,512),[[i.F8,t.isFetching]]),(0,l.wy)((0,l._)("div",{class:"load-tweets blue-text",onClick:(0,i.iM)(u,["stop"])}," Load more tweets ",8,c),[[i.F8,!t.isFetching]])],64)):(0,l.kq)("",!0)}};const u=o;var w=u},2473:function(e,t,a){a.d(t,{Z:function(){return ee}});var l=a(3396),i=a(7139),s=a(4870),n=a(9242),r=a(5743),c=a.n(r),o=a(8341),u=a(6601),w=a(1172),d=a(9707),v=a(7925),f=a(9327),m=a(988);const p={key:0,class:"user-retweet gray-text"},k={class:"retweeted-by"},y={class:"tweet-body"},g={class:"profile-pic-container"},_={key:0,class:"gray-line"},h={class:"tweet-data"},C={class:"user-info-and-btn"},U={class:"user-info-wrapper"},b=(0,l._)("span",{class:"separator gray-text"},"Â·",-1),x={class:"tweet-time gray-text"},S=["onClick"],D={key:0,class:"overlay"},T={key:1,class:"tweet-menu-container"},q={class:"tweet-menu-list"},H={class:"tweet-menu-icon"},I={class:"tweet-menu-icon"},M={class:"tweet-menu-icon"},P=(0,l._)("button",{class:"cancel-btn"},"Cancel",-1),L={class:"tweet-content"},W={key:0,class:"replying-to"},z=(0,l._)("span",{class:"gray-text"},"Replying to ",-1),Z={class:"tweet-text"},B=["src"],F={class:"tweet-actions-wrapper"},A={class:"tweet-metrics"},E=["onClick"],R={class:"tweet-metric reply-metric gray-text"},$={class:"tweet-metrics"},j=["onClick"],N={class:"tweet-metric retweet-metric gray-text"},O={key:0},Y={class:"tweet-metrics"},J=["onClick"],K={class:"tweet-metric like-metric gray-text"},V={key:0},X=["onClick"];var G={__name:"TweetCard",props:{id:String,user:[Object,Promise],tweet:Object,retweetedBy:String,replyingTo:[String,Promise],isPreviousReply:Boolean,isNewNotification:Boolean},async setup(e){let t,r;const G=e,Q=(0,v.g)(),ee=(0,f.q)(),te=(0,m.U)(),ae=(0,s.iH)(([t,r]=(0,l.mv)((()=>G.user)),t=await t,r(),t)),le=(0,s.iH)(([t,r]=(0,l.mv)((()=>G.replyingTo)),t=await t,r(),t));var ie=a(893);c().extend(ie);let se=null;const ne=(0,s.iH)(!1),re=(0,s.iH)(c()().toISOString()),ce=(0,s.iH)(w.Z.formatTweetDate(G.tweet.timestamp,re.value)),oe=(0,s.iH)(G.tweet.likeCount),ue=(0,s.iH)(([t,r]=(0,l.mv)((()=>Q.hasLiked(G.id,te.currentId))),t=await t,r(),t)),we=(0,s.iH)(G.tweet.retweetCount),de=(0,s.iH)(([t,r]=(0,l.mv)((()=>Q.hasRetweeted(G.id,te.currentId))),t=await t,r(),t)),ve=(0,l.Fl)((()=>te.canFollow(ae.value.id))),fe=()=>{te.currentId&&(ne.value=!ne.value)},me=()=>{te.currentId&&Q.removeTweet(G.id,ae.value.id)},pe=()=>{te.currentId&&(ue.value?(Q.removeLike(G.id,te.currentId,ae.value.id),oe.value--,ue.value=!1):(Q.addLike(G.id,te.currentId,G.retweetedBy),oe.value++,ue.value=!0))},ke=()=>{te.currentId&&(de.value?(Q.removeRetweet(G.id,te.currentId,ae.value.id),we.value--,de.value=!1):(Q.addRetweet(G.id,te.currentId,G.retweetedBy),we.value++,de.value=!0))},ye=()=>{te.currentId&&(ee.setModalType("reply"),ee.setModalReply(ae.value.id,G.id),ee.toggleModal())},ge=()=>{ee.toast("Copied to clipboard"),navigator.clipboard.writeText(`${window.location.host}/status/${G.id}`)};return(0,l.bv)((()=>{c()(re.value).diff(c()(G.tweet.timestamp),"hour")>23||(se=setInterval((()=>{ce.value!==w.Z.formatTweetDate(G.tweet.timestamp,re.value)&&(ce.value=w.Z.formatTweetDate(G.tweet.timestamp,re.value))}),3e4))})),(0,l.Jd)((()=>{clearInterval(se)})),(t,a)=>{const r=(0,l.up)("v-icon");return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["tweet-container",{border:!e.isPreviousReply,new:e.isNewNotification}]),onClick:a[6]||(a[6]=e=>(0,s.SU)(ee).viewTweet(G.id))},[G.retweetedBy?((0,l.wg)(),(0,l.iD)("div",p,[(0,l.Wm)(r,{name:"la-retweet-solid",scale:"0.89",fill:"#ffffff80"}),(0,l._)("span",k,(0,i.zw)(G.retweetedBy)+" Retweeted",1)])):(0,l.kq)("",!0),(0,l._)("div",y,[(0,l._)("div",g,[(0,l.Wm)(o.Z,{url:ae.value.avatarUrl,size:48,onClick:a[0]||(a[0]=(0,n.iM)((e=>(0,s.SU)(ee).viewUserProfile(ae.value.username)),["stop"]))},null,8,["url"]),e.isPreviousReply?((0,l.wg)(),(0,l.iD)("div",_)):(0,l.kq)("",!0)]),(0,l._)("div",h,[(0,l._)("div",C,[(0,l._)("div",U,[(0,l._)("span",{class:"display-name",onClick:a[1]||(a[1]=(0,n.iM)((e=>(0,s.SU)(ee).viewUserProfile(ae.value.username)),["stop"]))},[(0,l._)("a",null,(0,i.zw)(ae.value.name),1)]),(0,l._)("span",{class:"username gray-text",onClick:a[2]||(a[2]=(0,n.iM)((e=>(0,s.SU)(ee).viewUserProfile(ae.value.username)),["stop"]))},[(0,l._)("a",null,"@"+(0,i.zw)(ae.value.username),1)]),b,(0,l._)("span",x,(0,i.zw)(ce.value),1)]),(0,l._)("span",{class:"tweet-action-icon extra-btn",onClick:(0,n.iM)(fe,["stop"])},[(0,l.Wm)(r,{name:"hi-dots-horizontal",scale:"1.0",fill:"#ffffff80"}),ne.value?((0,l.wg)(),(0,l.iD)("div",D)):(0,l.kq)("",!0),ne.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("ul",q,[(0,s.SU)(te).currentId==ae.value.id||(0,s.SU)(te).currentUser.isAdmin?((0,l.wg)(),(0,l.iD)("li",{key:0,class:"tweet-menu-item delete-tweet",onClick:me},[(0,l._)("span",H,[(0,l.Wm)(r,{name:"bi-trash",scale:"1.1",fill:"red"})]),(0,l.Uk)("Delete ")])):(0,l.kq)("",!0),(0,s.SU)(te).currentId!==ae.value.id&&(0,s.SU)(ve)?((0,l.wg)(),(0,l.iD)("li",{key:1,class:"tweet-menu-item",onClick:a[3]||(a[3]=e=>(0,s.SU)(te).followUser(ae.value.id))},[(0,l._)("span",I,[(0,l.Wm)(r,{name:"co-user-follow",scale:"1.1",fill:"#ffffff80"})]),(0,l.Uk)("Follow @"+(0,i.zw)(ae.value.username),1)])):(0,l.kq)("",!0),(0,s.SU)(te).currentId===ae.value.id||(0,s.SU)(ve)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("li",{key:2,class:"tweet-menu-item",onClick:a[4]||(a[4]=e=>(0,s.SU)(te).unfollowUser(ae.value.id))},[(0,l._)("span",M,[(0,l.Wm)(r,{name:"co-user-unfollow",scale:"1.1",fill:"#ffffff80"})]),(0,l.Uk)("Unfollow @"+(0,i.zw)(ae.value.username),1)])),P])])):(0,l.kq)("",!0)],8,S)]),(0,l._)("div",L,["reply"===G.tweet.type&&G.tweet.replyingToTweet?((0,l.wg)(),(0,l.iD)("div",W,[z,(0,l._)("a",{class:"blue-link",onClick:a[5]||(a[5]=(0,n.iM)((e=>(0,s.SU)(ee).viewUserProfile(le.value)),["stop"]))},"@"+(0,i.zw)(le.value),1)])):(0,l.kq)("",!0),(0,l._)("div",Z,[(0,l.Wm)(u.Z,{text:G.tweet.text},null,8,["text"])]),G.tweet.media.length>0?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,i.C_)(["tweet-media",[(0,s.SU)(d.YM)(G.tweet.media)]])},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(G.tweet.media,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"image-preview-wrapper",key:G.tweet.media.indexOf(e)},[(0,l._)("img",{src:e},null,8,B)])))),128))],2)):(0,l.kq)("",!0)]),(0,l._)("div",F,[(0,l._)("span",A,[(0,l._)("span",{class:"tweet-action-icon reply-btn",onClick:(0,n.iM)(ye,["stop"])},[(0,l.Wm)(r,{name:"fa-regular-comment",scale:"1.0",fill:"#ffffff80"})],8,E),(0,l._)("span",R,(0,i.zw)(G.tweet.repliesFrom.length>0?G.tweet.repliesFrom.length:""),1)]),(0,l._)("span",$,[(0,l._)("span",{class:(0,i.C_)(["tweet-action-icon retweet-btn",{retweeted:de.value}]),onClick:(0,n.iM)(ke,["stop"])},[(0,l.Wm)(r,{name:"la-retweet-solid",scale:"1.15",fill:"#ffffff80"})],10,j),(0,l._)("span",N,[we.value>0?((0,l.wg)(),(0,l.iD)("span",O,(0,i.zw)(we.value),1)):(0,l.kq)("",!0)])]),(0,l._)("span",Y,[(0,l._)("span",{class:(0,i.C_)(["tweet-action-icon like-btn",{liked:ue.value}]),onClick:(0,n.iM)(pe,["stop"])},[(0,l.Wm)(r,{name:"fa-regular-heart",scale:"1.0",fill:"#ffffff80"})],10,J),(0,l._)("span",K,[oe.value>0?((0,l.wg)(),(0,l.iD)("span",V,(0,i.zw)(oe.value),1)):(0,l.kq)("",!0)])]),(0,l._)("span",{class:"tweet-action-icon share-tweet-btn",onClick:(0,n.iM)(ge,["stop"])},[(0,l.Wm)(r,{name:"gi-share",scale:"1.0",fill:"#ffffff80"})],8,X)])])])],2)}}};const Q=G;var ee=Q}}]);
//# sourceMappingURL=640.c4e2f4c0.js.map