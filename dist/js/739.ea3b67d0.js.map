{"version":3,"file":"js/739.ea3b67d0.js","mappings":"gVASA,MAAMA,GAAQC,EAAAA,EAAAA,KACRC,GAASC,EAAAA,EAAAA,KAAS,IAAMH,EAAME,SAC9BE,GAAYC,EAAAA,EAAAA,MAAG,mBAAOC,MAAgB,kBACtCC,GAAUF,EAAAA,EAAAA,KAAI,GACdG,GAAWH,EAAAA,EAAAA,KAAI,GAErBI,eAAeH,IACb,MAAMI,EAAO,GACPC,QAAsBC,EAAAA,EAAAA,KAC1BC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,WAAWC,EAAAA,EAAAA,IAAM,OAAQ,KAAM,WAGtD,OADAL,EAAcM,SAASC,GAAQR,EAAKS,KAAKC,OAAOC,OAAOH,EAAII,WACpDtB,EAAMuB,gBAAgBb,EAE9B,CAED,SAASc,EAAYC,GACnBjB,EAASkB,OAAQ,EACjBD,EAAIR,SAASU,IACX3B,EAAME,OAAOiB,KAAKQ,EAAlB,IAEFpB,EAAQmB,OAAQ,EAChBlB,EAASkB,OAAQ,CAClB,C,OAEDE,EAAAA,EAAAA,KAAcnB,UACZT,EAAM6B,UAAU,IAChBL,EAAYpB,EAAUsB,MAAMI,MAAM,EAAG9B,EAAM+B,YAA3C,KAGFC,EAAAA,EAAAA,IAAM9B,GAAQ,KACZF,EAAMiC,YAAN,I,kSClCF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://chitter/./src/components/ExploreView.vue","webpack://chitter/./src/components/ExploreView.vue?bd62"],"sourcesContent":["<script setup>\r\nimport { ref, computed, watch, onBeforeMount } from \"vue\";\r\nimport { useTweetStore } from \"@/stores/tweets.js\";\r\nimport ComposeTweet from \"./subcomponents/ComposeTweet.vue\";\r\nimport TweetList from \"./lists/TweetList.vue\";\r\nimport LoadTweets from \"./subcomponents/LoadTweets.vue\";\r\nimport { db } from \"@/firebase.js\";\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\n\r\nconst store = useTweetStore();\r\nconst tweets = computed(() => store.tweets);\r\nconst rawTweets = ref(await getInitialTweets());\r\nconst pending = ref(true); // initial load\r\nconst fetching = ref(true);\r\n\r\nasync function getInitialTweets() {\r\n  const twts = [];\r\n  const querySnapshot = await getDocs(\r\n    query(collection(db, \"tweets\"), where(\"type\", \"!=\", \"reply\"))\r\n  );\r\n  querySnapshot.forEach((doc) => twts.push(Object.assign(doc.data())));\r\n  return store.sortByTimestamp(twts);\r\n  // NOTE: can't use orderby with different field so i still have to download the whole collection anyway lol.\r\n}\r\n\r\nfunction fetchTweets(arr) {\r\n  fetching.value = true;\r\n  arr.forEach((twt) => {\r\n    store.tweets.push(twt);\r\n  });\r\n  pending.value = false;\r\n  fetching.value = false;\r\n}\r\n\r\nonBeforeMount(async () => {\r\n  store.setTweets([]);\r\n  fetchTweets(rawTweets.value.slice(0, store.fetchLimit));\r\n});\r\n\r\nwatch(tweets, () => {\r\n  store.sortTweets();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <ComposeTweet />\r\n    <div class=\"tweet-list-container\">\r\n      <TweetList :tweets=\"tweets\" :pending=\"pending\" />\r\n      <LoadTweets\r\n        :isFetching=\"fetching\"\r\n        :rawTweets=\"rawTweets.slice(store.fetchLimit)\"\r\n        :fetch=\"fetchTweets\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\ndiv {\r\n  width: 100%;\r\n}\r\n</style>\r\n","import script from \"./ExploreView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ExploreView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ExploreView.vue?vue&type=style&index=0&id=2ccf3fcc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Documents\\\\repos\\\\chitter\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2ccf3fcc\"]])\n\nexport default __exports__"],"names":["store","useTweetStore","tweets","computed","rawTweets","ref","getInitialTweets","pending","fetching","async","twts","querySnapshot","getDocs","query","collection","db","where","forEach","doc","push","Object","assign","data","sortByTimestamp","fetchTweets","arr","value","twt","onBeforeMount","setTweets","slice","fetchLimit","watch","sortTweets","__exports__"],"sourceRoot":""}